// Citizen Collection - Extended Schema
{
  "_id": ObjectId("..."),              // Auto-generated by MongoDB
  "simulated_id": string,              // Unique citizen ID (e.g., "citizen001")
  "personal_info": {
    "name": string,                    // Citizen's name (e.g., "Alice")
    "birthdate": Date,                 // Birth date (e.g., "1990-05-15")
    "gender": string,                  // Gender (e.g., "female")
    "national_id": string,             // National ID number
    "biometric_data": {
      "fingerprint_hash": string,      // Hashed fingerprint data
      "facial_recognition_id": string, // Facial recognition identifier
      "last_verified": Date            // When biometrics were last verified
    },
    "contact": {
      "email": string,                 // Primary email
      "phone": string,                 // Phone number
      "address": {
        "street": string,              // Street address
        "city": string,                // City
        "province": string,            // Province/State
        "postal_code": string,         // Postal code
        "country": string,             // Country
        "geo_coordinates": {           // Precise coordinates
          "latitude": double,
          "longitude": double,
          "precision": double,         // Precision in meters
          "last_updated": Date         // When coordinates were last updated
        }
      },
      "emergency_contacts": [{
        "name": string,                // Emergency contact name
        "relationship": string,        // Relationship to citizen
        "phone": string,               // Emergency contact phone
        "verified": boolean            // Whether verified
      }]
    },
    "family_connections": [{
      "relative_id": string,           // ID of related citizen
      "relationship_type": string,     // Parent, child, spouse, etc.
      "influence_factor": double,      // How much this relation affects score
      "cohabitation_status": boolean   // Whether living together
    }]
  },
  "credit_profile": {
    "current_score": int,              // Current social credit score (e.g., 750)
    "score_history": [                 // Historical scores
      {
        "date": Date,                  // Date of score calculation
        "score": int,                  // Score value at this date
        "change": int,                 // Change from previous score
        "category_breakdown": {        // Score breakdown by category
          "financial": int,
          "social": int,
          "civic": int,
          "environmental": int
        }
      }
    ],
    "tier": string,                    // Credit tier (e.g., "A", "B", "C", "D")
    "tier_history": [{                 // History of tier changes
      "old_tier": string,
      "new_tier": string,
      "change_date": Date,
      "reason": string
    }],
    "flags": [string],                 // Special flags (e.g., "watchlist", "VIP")
    "last_updated": Date,              // Last score update timestamp
    "predictive_metrics": {            // Predictive scoring data
      "trend_direction": string,       // "improving", "stable", "declining"
      "projected_score": {             // Score projections
        "six_months": int,             // Projected score in 6 months
        "one_year": int,               // Projected score in 1 year
        "confidence": double           // Confidence level (0.0-1.0)
      },
      "risk_factors": [{               // Risk factors potentially affecting score
        "factor": string,              // Factor name
        "probability": double,         // Probability of occurrence
        "potential_impact": int        // Potential score impact
      }]
    }
  },
  "activity_log": [                    // Array of activity records
    {
      "timestamp": Date,               // When activity occurred
      "activity_type": string,         // Type of activity
      "description": string,           // Activity description
      "location": {
        "coordinates": [double, double], // Longitude and latitude
        "place": string,                 // Named location
        "verified": boolean,           // Whether location is verified
        "verification_method": string  // Method of verification
      },
      "points_impact": int,            // Impact on credit score
      "rule_id": string,               // Reference to rule applied
      "evidence_data": {               // Evidence of activity
        "evidence_type": string,       // Type of evidence (photo, video, etc.)
        "source_device": string,       // Source of evidence
        "integrity_hash": string,      // Hash to verify evidence integrity
        "storage_location": string     // Where evidence is stored
      },
      "associated_citizens": [{        // Other citizens involved
        "citizen_id": string,
        "role": string
      }]
    }
  ],
  "compliance_metrics": {
    "financial": {
      "tax_compliance": double,        // 0.0-1.0 score
      "debt_ratio": double,            // Debt to income ratio
      "payment_timeliness": double,    // 0.0-1.0 score
      "financial_history": [{          // Historical financial events
        "event_type": string,          // Type of financial event
        "date": Date,                  // When it occurred
        "impact": double,              // Impact on financial score
        "details": {                   // Specific details
          "amount": double,
          "institution": string,
          "account_type": string
        }
      }]
    },
    "social": {
      "community_participation": double,  // 0.0-1.0 score
      "online_behavior": double,          // 0.0-1.0 score
      "relationship_status": double,      // 0.0-1.0 score
      "social_influence": {               // Social network influence
        "follower_count": int,            // Number of followers
        "sentiment_score": double,        // Sentiment analysis of social posts
        "reach_multiplier": double,       // Influence multiplier based on reach
        "platform_presence": [{           // Presence on specific platforms
          "platform": string,
          "handle": string,
          "verified": boolean,
          "influence_score": double
        }]
      }
    },
    "legal": {
      "violations_count": int,            // Number of legal violations
      "severity_index": double,           // Weighted severity score
      "violation_history": [{             // Historical violations
        "violation_type": string,
        "date": Date,
        "severity": double,
        "resolution_status": string,
        "enforcing_agency": string
      }]
    },
    "health": {
      "wellness_score": double,           // Overall health score
      "compliance_with_checkups": double, // Regular checkup attendance
      "substance_use_metrics": {          // Substance use tracking
        "alcohol": double,
        "tobacco": double,
        "monitored_substances": double
      },
      "exercise_compliance": double       // Exercise routine compliance
    },
    "environmental": {
      "carbon_footprint": double,         // Carbon emissions score
      "recycling_compliance": double,     // Recycling habits score
      "resource_consumption": {           // Resource usage
        "water": double,
        "electricity": double,
        "fossil_fuels": double
      }
    }
  },
  "access_permissions": {                 // Access control information
    "restricted_areas": [{                // Areas citizen can access
      "area_id": string,
      "access_level": string,
      "granted_date": Date,
      "expiration_date": Date,
      "granting_authority": string
    }],
    "travel_permissions": {               // Travel permissions
      "domestic": boolean,
      "international": boolean,
      "restricted_regions": [string],     // Regions with restricted access
      "approved_regions": [string]        // Regions with explicit approval
    }
  }
}

// Rules Collection - Extended Schema
{
  "_id": ObjectId("..."),              // Auto-generated by MongoDB
  "rule_id": string,                   // Unique rule identifier
  "name": string,                      // Human-readable name
  "description": string,               // Detailed description
  "category": string,                  // Rule category
  "subcategory": string,               // Rule subcategory
  "point_impact": {
    "base_value": int,                 // Base points to add/deduct
    "multiplier_factors": [            // Factors that can multiply impact
      {
        "factor_name": string,         // Factor name (e.g., "repeat_offense")
        "threshold": double,           // Threshold for application
        "multiplier": double           // Multiplier value
      }
    ],
    "max_impact": int                  // Maximum possible impact
  },
  "conditions": {
    "prerequisites": [string],         // Prerequisites for rule application
    "exclusions": [string]             // Conditions that prevent application
  },
  "enforcement": {
    "automatic": boolean,              // Whether automatically enforced
    "requires_review": boolean,        // Whether human review is required
    "review_level": int                // Level of review authority required
  },
  "metadata": {
    "created_at": Date,                // When rule was created
    "modified_at": Date,               // When rule was last modified
    "version": string,                 // Rule version
    "active": boolean                  // Whether rule is active
  }
}

// Transactions Collection - For Credit Score Changes
{
  "_id": ObjectId("..."),              // Auto-generated by MongoDB
  "transaction_id": string,            // Unique transaction identifier
  "citizen_id": string,                // Reference to citizen
  "rule_id": string,                   // Reference to applied rule
  "timestamp": Date,                   // When transaction occurred
  "points_change": int,                // Points added or deducted
  "previous_score": int,               // Score before transaction
  "new_score": int,                    // Score after transaction
  "reason": string,                    // Textual explanation
  "evidence": {                        // Supporting evidence
    "type": string,                    // Type of evidence
    "source": string,                  // Source of evidence
    "reference_ids": [string],         // Reference identifiers
    "attachments": [string]            // File attachments
  },
  "processed_by": {                    // Processing entity
    "system_id": string,               // System identifier
    "operator_id": string,             // Operator identifier (if manual)
    "method": string                   // Processing method
  },
  "status": string                     // Transaction status
}